<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tasks</title><link type="text/css" rel="stylesheet" href="public/anatomy.css" /><link type="text/css" rel="stylesheet" href="public/highlight.css" /><script type="text/javascript" src="public/jquery.js"></script><script type="text/javascript" src="public/jquery.hotkeys.js"></script><script type="text/javascript" src="public/tags_running-tasks.js"></script><script type="text/javascript" src="public/main.js"></script></head><body class="normal"><div id="main"><div id="content"><div class="section" id="section_running-tasks"><h1 class="section_header"><a name="running-tasks"></a>Tasks</h1><p></p><p>The smallest configurable unit in a Concourse pipeline is a single task.</p><p>Once you have a running Concourse deployment, you can start configuring your
tasks and executing them interactively from your terminal with the
<a href="fly-cli.html">Fly</a> commandline tool.</p><p>Once you&#39;ve figured out your tasks&#39;s configuration, you can reuse it for a
<a class="undefined">Pipeline</a>.</p><p>
</p><div class="section" id="section_configuring-tasks"><h2 class="section_header"><a name="configuring-tasks"></a>Configuring a Task</h2><p>Conventionally a task&#39;s configuration is placed in the root of a repo as
<code>task.yml</code>. It may look something like:</p><pre class="verbatim">---
platform: linux

image: docker:///ubuntu#14.04

inputs:
- name: my-repo

run:
  path: my-repo/scripts/test</pre><p>This configuration specifies that the task must run with the
<code>ubuntu:14.04</code> Docker image with a @codemy-repo input, and when the
task is executed it will run the script <code>my-repo/scripts/test</code>.</p><p>A task&#39;s configuration specifies the following:</p><div class="definition"><p><a name="platform"></a></p><div class="thumb"><pre><span class="n"><a href="running-tasks.html#platform">platform</a></span><span class="definition_result_arrow"> =&gt; </span><span class="n">string</span></pre></div><p><em>Required.</em> The platform the task should run on. By convention,
<code>windows</code>, @codelinux, or @codedarwin are specified. This determines
the pool of workers that the task can run against. The base deployment
provides Linux workers.</p></div><div class="definition"><p><a name="tags"></a></p><div class="thumb"><pre><span class="n"><a href="running-tasks.html#tags">tags</a></span><span class="definition_result_arrow"> =&gt; </span><span class="n">string</span></pre></div><p><em>Optional.</em> A set of arbitrary tags to determine which workers the task
should run on. Tags can be omitted from task configuration files and
overridden by jobs, so that the task config can be reused and run in separate
environments.</p></div><div class="definition"><p><a name="image"></a></p><div class="thumb"><pre><span class="n"><a href="running-tasks.html#image">image</a></span><span class="definition_result_arrow"> =&gt; </span><span class="n">string</span></pre></div><p><em>Optional.</em> The base image of the container. For a Docker image, specify
in the format <code>docker:///username/repo#tag</code> (rather than
<code>username/repo:tag</code>). If you for whatever reason have an extracted
rootfs lying around, you can also specify the absolute path to it on the
worker VM.</p></div><div class="definition"><p><a name="inputs"></a></p><div class="thumb"><pre><span class="n"><a href="running-tasks.html#inputs">inputs</a></span><span class="definition_result_arrow"> =&gt; </span><span class="p">[</span><span class="n">object</span><span class="p">]</span></pre></div><p><em>Required.</em> The expected set of inputs for the task.</p><p>This determines which artifacts will propagate into the task, as the
<a href="build-plans.html">build plan</a> executes. If any specified inputs
are not present, the task will end with an error, without running.</p><p>Each input has the following attributes:</p><p>@nested[#:style &#39;inset]</p><div class="definition"><p><a name="name"></a></p><div class="thumb"><pre><span class="n"><a href="running-tasks.html#name">name</a></span><span class="definition_result_arrow"> =&gt; </span><span class="n">string</span></pre></div><p><em>Required.</em> The logical name of the input.</p></div><div class="definition"><p><a name="path"></a></p><div class="thumb"><pre><span class="n"><a href="running-tasks.html#path">path</a></span><span class="definition_result_arrow"> =&gt; </span><span class="n">string</span></pre></div><p><em>Optional.</em> The path in the where the input will be placed. If not
specified, the input&#39;s <code>name</code> is used.</p></div></div><div class="definition"><p><a name="run"></a></p><div class="thumb"><pre><span class="n"><a href="running-tasks.html#run">run</a></span><span class="definition_result_arrow"> =&gt; </span><span class="n">object</span></pre></div><p><em>Required.</em> The command to execute in the container.</p><p>Note that this is <em>not</em> provided as a script blob, but explicit
<code>path</code> and @codeargs values; this allows @codefly to forward
arguments to the script, and forces your config <code>.yml</code> to stay fairly
small.</p></div><div class="definition"><p><a name="params"></a></p><div class="thumb"><pre><span class="n"><a href="running-tasks.html#params">params</a></span><span class="definition_result_arrow"> =&gt; </span><span class="p">{</span><span class="n">string</span><span class="p">:</span><span class="t"> </span><span class="n">string</span><span class="p">}</span></pre></div><p><em>Optional.</em> A key-value mapping of values that are exposed to the
task via environment variables.</p><p>Use this to provide things like credentials, not to set up the task&#39;s
Bash environment (they do not support interpolation).</p></div></div><div class="section" id="section_fly"><h2 class="section_header"><a name="fly"></a>Running tasks with <code>fly</code></h2><p><a href="fly-cli.html">Fly</a> is a command-line tool that can be used to execute
a task configuration against a Concourse deployment. This provides a fast
feedback loop for iterating on the task configuration and your code.</p><p>For more information, see <a href="fly-cli.html#fly-execute"><code>execute</code>: Submitting Local Tasks</a>.</p></div></div></div></div><div class="search"><form action="javascript:void(0)"><input type="text" placeholder="Search&hellip;" autocomplete="off" id="search" /></form><ul class="search_results"></ul></div><div id="sidebar"><h4>On this page:</h4><ol class="toc"><li><a href="running-tasks.html#configuring-tasks">Configuring a Task</a></li><li><a href="running-tasks.html#fly">Running tasks with <code>fly</code></a></li></ol><h4>Up one level:</h4><ol class="toc"><li><a href="index.html">Concourse: CI that scales with your project</a><ol><li><a href="what-and-why.html">What &amp; Why</a><ol><li><a href="what-and-why.html#simple">Simple</a></li><li><a href="what-and-why.html#usable">Usable</a></li><li><a href="what-and-why.html#isolated-builds">Isolated Builds</a></li><li><a href="what-and-why.html#scalable-reproducible-deployment">Scalable, reproducible deployment</a></li><li><a href="what-and-why.html#flexible">Flexible</a></li><li><a href="what-and-why.html#local-iteration">Local iteration</a></li><li><a href="what-and-why.html#bootstrapped">Bootstrapped</a></li></ol></li><li><a href="concepts.html">Concepts</a><ol><li><a href="tasks.html">Tasks</a><ol><li><a href="tasks.html#runtime-environment">Runtime Environment</a></li></ol></li><li><a href="resources.html">Resources</a></li><li><a href="jobs.html">Jobs</a><ol><li><a href="jobs.html#job-builds">Builds</a></li></ol></li></ol></li><li><a href="getting-started.html">Getting Started</a><ol><li><a href="getting-started.html#deploying-with-vagrant">Provisioning with Vagrant</a></li><li><a href="getting-started.html#deploying-with-bosh">Deploying a cluster with BOSH</a><ol><li><a href="getting-started.html#setting-up-the-infrastructure">Setting up the infrastructure</a><ol><li><a href="getting-started.html#bosh-lite">BOSH-Lite</a></li><li><a href="getting-started.html#aws">AWS</a></li><li><a href="getting-started.html#vsphere-openstack">vSphere, OpenStack</a></li></ol></li><li><a href="getting-started.html#deploying-and-upgrading-concourse">Deploying and upgrading Concourse</a><ol><li><a href="getting-started.html#upload-the-stemcell">Upload the stemcell</a></li><li><a href="getting-started.html#upload-the-concourse-and-garden-releases">Upload the Concourse &amp; Garden releases</a></li><li><a href="getting-started.html#bosh-properties">Configure &amp; Deploy</a></li></ol></li></ol></li></ol></li><li><a href="fly-cli.html">The Fly CLI</a><ol><li><a href="fly-cli.html#targeting-your-concourse">Targeting your Concourse</a></li><li><a href="fly-cli.html#fly-save-target"><code>save-target</code>: Saving Concourse Targets</a></li><li><a href="fly-cli.html#fly-execute"><code>execute</code>: Submitting Local Tasks</a><ol><li><a href="fly-cli.html#multiple-inputs-to-locally-submitted-tasks">Multiple Inputs to Locally Submitted Tasks</a></li></ol></li><li><a href="fly-cli.html#fly-configure"><code>configure</code>: Configuring Pipelines</a><ol><li><a href="fly-cli.html#parameters">Parameters</a></li></ol></li><li><a href="fly-cli.html#fly-destroy-pipeline"><code>destroy-pipeline</code>: Removing Pipelines</a></li><li><a href="fly-cli.html#fly-intercept"><code>intercept</code>: Accessing a running or recent build&#39;s steps</a></li><li><a href="fly-cli.html#fly-sync"><code>sync</code>: Update your local copy of @codefly</a></li><li><a href="fly-cli.html#fly-watch"><code>watch</code>: View logs of in-progress builds</a></li></ol></li><li><a href="running-tasks.html">Tasks</a><ol><li><a href="running-tasks.html#configuring-tasks">Configuring a Task</a></li><li><a href="running-tasks.html#fly">Running tasks with <code>fly</code></a></li></ol></li><li><a href="pipelines.html">Piplines</a><ol><li><a href="configuring-resources.html"><code>resources</code>: Objects flowing through the pipeline</a></li><li><a href="configuring-jobs.html"><code>jobs</code>: Plans to execute against resources</a></li><li><a href="configuring-groups.html"><code>groups</code>: Splitting up your pipeline into sections</a></li></ol></li><li><a href="build-plans.html">Build Plans</a><ol><li><a href="get-step.html"><code>get</code>: fetch a resource</a></li><li><a href="put-step.html"><code>put</code>: update a resource</a></li><li><a href="task-step.html"><code>task</code>: execute a task</a></li><li><a href="aggregate-step.html"><code>aggregate</code>: run steps in parallel</a></li><li><a href="do-step.html"><code>do</code>: run steps in series</a></li><li><a href="step-conditions.html"><code>conditions</code>: conditionally perform a step</a></li></ol></li><li><a href="implementing-resources.html">Implementing a Resource</a><ol><li><a href="implementing-resources.html#check:-check-for-new-versions."><code>check</code>: Check for new versions.</a></li><li><a href="implementing-resources.html#in:-fetch-a-given-resource."><code>in</code>: Fetch a given resource.</a></li><li><a href="implementing-resources.html#out:-update-a-resource."><code>out</code>: Update a resource.</a></li></ol></li></ol></li></ol></div></body></html>